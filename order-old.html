<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Order genuine Bajaj spare parts online. Select your bike model and year, add parts, and confirm via WhatsApp. Fast and easy ordering process." />
  <meta name="keywords" content="order spare parts, online ordering, WhatsApp order, Bajaj parts, fast delivery" />
  <link rel="manifest" href="manifest.json" />
  <title>Order Genuine Bajaj Spare Parts | Sankar Motors</title>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      min-height: 100vh;
    }
    
    header {
      background: linear-gradient(135deg, #0f766e 0%, #14b8a6 100%);
      color: white;
      padding: 40px 20px;
      text-align: center;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    
    header h1 {
      font-size: 2.5em;
      margin-bottom: 5px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    }
    
    header p {
      font-size: 1.1em;
      opacity: 0.95;
    }
    
    nav {
      background: #115e59;
      padding: 0;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    nav a {
      color: white;
      padding: 15px 25px;
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
      display: inline-block;
    }
    
    nav a:hover {
      background: #0f766e;
      transform: translateY(-2px);
    }
    
    nav a.active {
      background: #0d5652;
      border-bottom: 3px solid #14b8a6;
    }
    
    .container {
      max-width: 1200px;
      margin: 30px auto;
      padding: 20px;
    }
    
    .card {
      background: white;
      padding: 35px;
      border-radius: 12px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.1);
      margin-bottom: 30px;
      animation: slideIn 0.5s ease;
    }
    
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .card h2 {
      color: #0f766e;
      margin-bottom: 15px;
      font-size: 1.8em;
      border-bottom: 3px solid #14b8a6;
      padding-bottom: 10px;
    }
    
    .form-section {
      margin-bottom: 35px;
      padding: 25px;
      border-left: 4px solid #14b8a6;
      background: linear-gradient(to right, #f0fdf4 0%, transparent 100%);
      border-radius: 8px;
    }
    
    .form-section h3 {
      color: #0f766e;
      margin-bottom: 20px;
      font-size: 1.3em;
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .step-badge {
      background: linear-gradient(135deg, #14b8a6 0%, #0f766e 100%);
      color: white;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 1em;
      box-shadow: 0 2px 8px rgba(20, 184, 166, 0.3);
      flex-shrink: 0;
    }
    
    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    
    .form-row.full {
      grid-template-columns: 1fr;
    }
    
    .form-row.three-column {
      grid-template-columns: 1fr 1fr 1fr;
    }
    
    label {
      display: block;
      margin-bottom: 8px;
      color: #333;
      font-weight: 600;
      font-size: 0.95em;
    }
    
    .required-asterisk {
      color: #ef4444;
      font-weight: bold;
    }
    
    input, textarea {
      width: 100%;
      padding: 12px;
      border: 2px solid #e0e0e0;
      border-radius: 6px;
      font-family: inherit;
      transition: all 0.3s ease;
    }
    
    input:focus, textarea:focus {
      outline: none;
      border-color: #14b8a6;
      box-shadow: 0 0 8px rgba(20, 184, 166, 0.4);
      background: rgba(20, 184, 166, 0.02);
    }
    
    input.error {
      border-color: #ef4444;
      background: #fef2f2;
    }
    
    input.success {
      border-color: #10b981;
      background: #f0fdf4;
    }
    
    textarea {
      resize: vertical;
      min-height: 80px;
    }
    
    select {
      width: 100%;
      padding: 12px;
      border: 2px solid #e0e0e0;
      border-radius: 6px;
      font-family: inherit;
      background: white;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    select:focus {
      outline: none;
      border-color: #14b8a6;
      box-shadow: 0 0 8px rgba(20, 184, 166, 0.4);
      background: rgba(255,255,255,0.95);
    }
    
    .part-row {
      display: grid;
      grid-template-columns: 2fr 1fr auto;
      gap: 10px;
      margin-bottom: 10px;
      align-items: end;
    }
    
    .part-row input {
      margin-bottom: 0;
    }
    
    .remove-btn {
      background: #ef4444;
      color: white;
      border: none;
      padding: 12px 15px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      height: 42px;
      width: 100%;
    }
    
    .remove-btn:hover {
      background: #dc2626;
    }
    
    .add-part-btn {
      background: #10b981;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      margin-top: 10px;
    }
    
    .add-part-btn:hover {
      background: #059669;
      transform: translateY(-2px);
    }
    
    button.submit-btn {
      background: linear-gradient(135deg, #0f766e 0%, #14b8a6 100%);
      color: white;
      border: none;
      padding: 15px 30px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 700;
      font-size: 1em;
      transition: all 0.3s ease;
      width: 100%;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-top: 20px;
      box-shadow: 0 4px 8px rgba(15, 118, 110, 0.2);
    }
    
    button.submit-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 16px rgba(15, 118, 110, 0.3);
    }
    
    button.submit-btn:active {
      transform: translateY(-1px);
    }
    
    button.submit-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    .image-section {
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 8px 16px rgba(0,0,0,0.1);
      margin-bottom: 30px;
    }
    
    .image-section img {
      width: 100%;
      height: 400px;
      object-fit: cover;
      display: block;
    }

    .form-highlight {
      background: linear-gradient(135deg, #fef3c7 0%, #fef08a 100%);
      border-left: 4px solid #f59e0b;
      padding: 15px;
      border-radius: 6px;
      margin-bottom: 25px;
      color: #92400e;
      font-weight: 500;
      box-shadow: 0 2px 8px rgba(245, 158, 11, 0.1);
    }

    .error-message {
      background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
      border-left: 4px solid #ef4444;
      padding: 12px;
      border-radius: 6px;
      color: #991b1b;
      display: none;
      margin-bottom: 20px;
      font-weight: 500;
      box-shadow: 0 2px 8px rgba(239, 68, 68, 0.1);
    }
    
    .form-step {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 5px;
    }
    
    .step-number {
      background: #14b8a6;
      color: white;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 0.85em;
    }
    
    /* Message Preview Modal */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      animation: fadeIn 0.3s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    .modal-content {
      background-color: white;
      margin: 5% auto;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.2);
      max-width: 600px;
      max-height: 80vh;
      overflow-y: auto;
      animation: slideUp 0.3s ease;
    }
    
    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      border-bottom: 2px solid #14b8a6;
      padding-bottom: 15px;
    }
    
    .modal-header h2 {
      color: #0f766e;
      font-size: 1.6em;
      margin: 0;
    }
    
    .close-btn {
      background: #ef4444;
      color: white;
      border: none;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
      padding: 0 8px;
      height: 36px;
      width: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }
    
    .close-btn:hover {
      background: #dc2626;
      transform: rotate(90deg);
    }
    
    .message-preview {
      background: linear-gradient(135deg, #f0fdf4 0%, #f0fdfa 100%);
      border: 2px solid #14b8a6;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
      font-family: 'Courier New', monospace;
      font-size: 0.95em;
      line-height: 1.6;
      color: #1f2937;
      white-space: pre-wrap;
      word-wrap: break-word;
      max-height: 400px;
      overflow-y: auto;
    }
    
    .message-preview::-webkit-scrollbar {
      width: 8px;
    }
    
    .message-preview::-webkit-scrollbar-track {
      background: #f0fdf4;
      border-radius: 10px;
    }
    
    .message-preview::-webkit-scrollbar-thumb {
      background: #14b8a6;
      border-radius: 10px;
    }
    
    .modal-actions {
      display: flex;
      gap: 15px;
      margin-top: 20px;
    }
    
    .modal-actions button {
      flex: 1;
      padding: 12px 20px;
      font-size: 1em;
      font-weight: 600;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .btn-send {
      background: linear-gradient(135deg, #0f766e 0%, #14b8a6 100%);
      color: white;
      box-shadow: 0 4px 12px rgba(20, 184, 166, 0.3);
    }
    
    .btn-send:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(20, 184, 166, 0.4);
    }
    
    .btn-edit {
      background: #e5e7eb;
      color: #1f2937;
    }
    
    .btn-edit:hover {
      background: #d1d5db;
      transform: translateY(-2px);
    }
    
    .copy-btn {
      background: #10b981;
      color: white;
      padding: 8px 12px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.85em;
      transition: all 0.3s ease;
      margin-top: 10px;
    }
    
    .copy-btn:hover {
      background: #059669;
    }
    
    footer {
      background: #111827;
      color: #d1d5db;
      text-align: center;
      padding: 25px;
      margin-top: 50px;
    }

      @media (max-width: 768px) {
      header h1 {
        font-size: 1.8em;
      }
      
      nav {
        flex-direction: column;
      }
      
      nav a {
        border-bottom: 1px solid #0d5652;
      }
      
      .card {
        padding: 20px;
      }
      
      .form-row {
        grid-template-columns: 1fr;
      }
      
      .part-row {
        grid-template-columns: 1fr 1fr;
      }
      
      .image-section img {
        height: 250px;
      }
    }
  </style>
</head>
<body>

<header>
  <h1>üèçÔ∏è SANKAR MOTORS</h1>
  <p>Genuine Bajaj Two-Wheeler Spare Parts</p>
</header>

<nav>
  <a href="index.html">Home</a>
  <a href="about.html">About Us</a>
  <a href="products.html">Products</a>
  <a href="order.html" class="active">Order Now</a>
  <a href="contact.html">Contact</a>
</nav>

<div class="container">

  <div class="image-section">
    <img src="https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=1200&h=400&fit=crop" alt="Order Your Motorcycle Parts" />
  </div>

  <div class="card">
    <h2>üì¶ Place Your Order</h2>
    <div class="info-box">
      ‚úì Fill in your details below and we'll process your order via WhatsApp<br/>
      ‚úì Fast delivery to your location<br/>
      ‚úì Authentic spare parts guaranteed<br/>
      ‚úì WhatsApp confirmation will be sent
    </div>

    <div class="success-message" id="successMessage">
      ‚úì Your order has been sent! Check WhatsApp for confirmation.
    </div>

    <form id="orderForm">
      
      <!-- Step 1: Customer Information -->
      <div class="form-section">
        <h3><span class="step-badge">1</span>üë§ Customer Information</h3>
        <div class="form-row">
          <div>
            <label for="name">Full Name <span class="required-asterisk">*</span></label>
            <input type="text" id="name" name="name" required placeholder="Your full name" />
          </div>
          <div>
            <label for="phone">Phone Number <span class="required-asterisk">*</span></label>
            <input type="tel" id="phone" name="phone" required placeholder="10-digit mobile number" />
          </div>
        </div>
        <div class="form-row full">
          <label for="email">Email Address</label>
          <input type="email" id="email" name="email" placeholder="your.email@example.com" />
        </div>
      </div>

      <!-- Step 2: Address Information -->
      <div class="form-section">
        <h3><span class="step-badge">2</span>üìç Delivery Address</h3>
        <div class="form-row full">
          <label for="address1">Address Line 1 <span class="required-asterisk">*</span></label>
          <input type="text" id="address1" name="address1" required placeholder="Street address, building name" />
        </div>
        <div class="form-row full">
          <label for="address2">Address Line 2</label>
          <input type="text" id="address2" name="address2" placeholder="Apartment, floor, suite (optional)" />
        </div>
        <div class="form-row">
          <div>
            <label for="city">City <span class="required-asterisk">*</span></label>
            <input type="text" id="city" name="city" required placeholder="City" value="Guntur" />
          </div>
          <div>
            <label for="zipcode">Postal Code <span class="required-asterisk">*</span></label>
            <input type="text" id="zipcode" name="zipcode" required placeholder="Postal code" />
          </div>
        </div>
      </div>

      <!-- Step 3: Bike Information -->
      <div class="form-section">
        <h3><span class="step-badge">3</span>üèçÔ∏è Bike Information</h3>
        <div class="form-highlight">
          ‚ÑπÔ∏è Please specify your bike model and year to ensure we suggest the correct spare parts.
        </div>
        <div class="form-row">
          <div>
            <label for="bikeModel">Bajaj Bike Model <span class="required-asterisk">*</span></label>
            <select id="bikeModel" name="bikeModel" required onchange="toggleCustomBike()">
              <option value="">-- Select Bike Model --</option>
              <optgroup label="Commuter Bikes">
                <option value="Bajaj Platina 100">Bajaj Platina 100</option>
                <option value="Bajaj Platina 110">Bajaj Platina 110</option>
                <option value="Bajaj CT 110 / CT 110X">Bajaj CT 110 / CT 110X</option>
              </optgroup>
              <optgroup label="Pulsar Sport Bikes">
                <option value="Bajaj Pulsar 125">Bajaj Pulsar 125</option>
                <option value="Bajaj Pulsar NS125">Bajaj Pulsar NS125</option>
                <option value="Bajaj Pulsar 150">Bajaj Pulsar 150</option>
                <option value="Bajaj Pulsar N160">Bajaj Pulsar N160</option>
                <option value="Bajaj Pulsar NS160">Bajaj Pulsar NS160</option>
                <option value="Bajaj Pulsar NS200">Bajaj Pulsar NS200</option>
                <option value="Bajaj Pulsar RS200">Bajaj Pulsar RS200</option>
                <option value="Bajaj Pulsar N250">Bajaj Pulsar N250</option>
              </optgroup>
              <optgroup label="Dominar / Premium Bikes">
                <option value="Bajaj Dominar 250">Bajaj Dominar 250</option>
                <option value="Bajaj Dominar 400">Bajaj Dominar 400</option>
                <option value="Bajaj Pulsar NS400Z">Bajaj Pulsar NS400Z</option>
              </optgroup>
              <option value="OTHER">Other Model (Please specify)</option>
            </select>
          </div>
          <div>
            <label for="bikeYear">Year of Purchase <span class="required-asterisk">*</span></label>
            <select id="bikeYear" name="bikeYear" required>
              <option value="">-- Select Year --</option>
              <option value="2024">2024</option>
              <option value="2023">2023</option>
              <option value="2022">2022</option>
              <option value="2021">2021</option>
              <option value="2020">2020</option>
              <option value="2019">2019</option>
              <option value="2018">2018</option>
              <option value="2017">2017</option>
              <option value="2016">2016</option>
              <option value="2015">2015</option>
              <option value="Before 2015">Before 2015</option>
            </select>
          </div>
        </div>
        <div class="form-row full" id="customBikeContainer" style="display: none;">
          <label for="customBikeModel">Enter Your Bike Model <span class="required-asterisk">*</span></label>
          <input type="text" id="customBikeModel" name="customBikeModel" placeholder="e.g., Bajaj XYZ 200, Custom Bajaj, etc." />
        </div>
        <div class="form-row full">
          <label for="additionalBikeInfo">Additional Bike Details (Optional)</label>
          <input type="text" id="additionalBikeInfo" name="additionalBikeInfo" placeholder="e.g., Engine number, color, or any specific details" />
        </div>
      </div>

      <!-- Step 4: Spare Parts -->
      <div class="form-section">
        <h3><span class="step-badge">4</span>üõ†Ô∏è Spare Parts & Quantity</h3>
        <div class="form-highlight">
          ‚ö†Ô∏è <strong>Required:</strong> Add at least ONE spare part. Press Enter or use the "Add Another Part" button to add more items.
        </div>
        <div id="partsContainer">
          <div class="part-row">
            <input type="text" placeholder="e.g., Pulsar 150 - Brake Pad" class="part-input" onkeydown="handleEnter(event)" />
            <input type="number" placeholder="Qty" min="1" class="qty-input" />
            <button type="button" class="remove-btn" style="display:none;" onclick="removePart(this)">Remove</button>
          </div>
        </div>
        <button type="button" class="add-part-btn" onclick="addNewPart()">+ Add Another Part</button>
      </div>

      <!-- Step 5: Additional Notes -->
      <div class="form-section">
        <h3><span class="step-badge">5</span>üìù Special Instructions (Optional)</h3>
        <label for="notes">Add any special requests or notes</label>
        <textarea id="notes" name="notes" placeholder="Any specific requirements or delivery instructions..."></textarea>
      </div>

      <!-- Step 6: Payment Information -->
      <div class="form-section" style="background: linear-gradient(to right, #fef3c7 0%, transparent 100%); border-left-color: #f59e0b;">
        <h3 style="color: #92400e;"><span class="step-badge" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">6</span>üí≥ Payment Information</h3>
        <div class="form-highlight" style="background: white; border-left-color: #f59e0b; color: #92400e;">
          <strong>How It Works:</strong><br/>
          ‚úì Submit your order via WhatsApp<br/>
          ‚úì Our team sends payment details to your WhatsApp<br/>
          ‚úì Pay using Google Pay (UPI) from your phone<br/>
          ‚úì Once payment received, we arrange fast delivery
        </div>
      </div>

      <!-- Submit Button -->
      <button type="button" class="submit-btn" onclick="sendWhatsApp()">üöÄ Send Order via WhatsApp</button>

    </form>
  </div>

</div>

<!-- Message Preview Modal -->
<div id="messageModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2>üìã Review Your Order</h2>
      <button class="close-btn" onclick="closeMessageModal()">√ó</button>
    </div>
    <p style="color: #666; margin-bottom: 15px;">
      üì± Here's the message we'll send to our WhatsApp. Review it and click "Send to WhatsApp" when ready.
    </p>
    <div class="message-preview" id="messagePreview"></div>
    <button class="copy-btn" onclick="copyMessage()">üìã Copy Message to Clipboard</button>
    <div class="modal-actions">
      <button class="btn-edit" onclick="closeMessageModal()">‚úèÔ∏è Edit Order</button>
      <button class="btn-send" onclick="sendToWhatsApp()">üì≤ Send to WhatsApp</button>
    </div>
  </div>
</div>

<footer>
  <div style="margin-bottom: 20px;">
    <strong>¬© 2026 Sankar Motors</strong><br/>
    <span style="font-size: 0.9em;">Fast ‚Ä¢ Reliable ‚Ä¢ Genuine</span>
  </div>
  <div style="border-top: 1px solid #444; padding-top: 15px; font-size: 0.85em;">
    <p>üèçÔ∏è Easy Online Ordering | üìû +91 92464 85044 | üí¨ Order Confirmation via WhatsApp</p>
    <p>Guntur, Andhra Pradesh | India</p>
  </div>
</footer>

<script src="common.js"></script>

<script>
function handleEnter(e) {
  if (e.key === "Enter") {
    e.preventDefault();
    addNewPart();
  }
}

function addNewPart() {
  const container = document.getElementById("partsContainer");
  const row = document.createElement("div");
  row.className = "part-row";
  row.innerHTML = `
    <input type="text" placeholder="e.g., Pulsar 150 - Brake Pad" class="part-input" onkeydown="handleEnter(event)" />
    <input type="number" placeholder="Qty" min="1" class="qty-input" />
    <button type="button" class="remove-btn" onclick="removePart(this)">Remove</button>
  `;
  container.appendChild(row);
  row.querySelector(".part-input").focus();
  updateRemoveButtons();
}

function removePart(btn) {
  btn.parentElement.remove();
  updateRemoveButtons();
}

function updateRemoveButtons() {
  const rows = document.querySelectorAll(".part-row");
  rows.forEach((row, index) => {
    const removeBtn = row.querySelector(".remove-btn");
    if (rows.length > 1) {
      removeBtn.style.display = "block";
    } else {
      removeBtn.style.display = "none";
    }
  });
}

function sendWhatsApp() {
  const errorMsg = document.getElementById("errorMessage");
  if (!errorMsg) {
    const form = document.getElementById("orderForm");
    const error = document.createElement("div");
    error.id = "errorMessage";
    error.className = "error-message";
    form.insertBefore(error, form.firstChild);
  }
  
  const errElement = document.getElementById("errorMessage");
  errElement.style.display = "none";
  errElement.innerHTML = "";
  
  let name = document.getElementById("name").value.trim();
  let phone = document.getElementById("phone").value.trim();
  let email = document.getElementById("email").value.trim();
  let address1 = document.getElementById("address1").value.trim();
  let address2 = document.getElementById("address2").value.trim();
  let city = document.getElementById("city").value.trim();
  let zipcode = document.getElementById("zipcode").value.trim();
  let bikeModel = document.getElementById("bikeModel").value.trim();
  let bikeYear = document.getElementById("bikeYear").value.trim();
  let customBikeModel = document.getElementById("customBikeModel").value.trim();
  let additionalBikeInfo = document.getElementById("additionalBikeInfo").value.trim();
  let notes = document.getElementById("notes").value.trim();

  // Validation
  if (!name || !phone || !address1 || !city || !zipcode) {
    showError("‚ùå Please fill in all required customer and address fields (marked with *)");
    return;
  }
  
  if (!bikeModel || !bikeYear) {
    showError("‚ùå Please select your bike model and year of purchase");
    return;
  }
  
  if (bikeModel === "OTHER" && !customBikeModel) {
    showError("‚ùå Please enter your bike model name");
    return;
  }

  // Use custom bike model if selected
  let finalBikeModel = bikeModel === "OTHER" ? customBikeModel : bikeModel;

  // Validate phone number
  if (!/^\d{10}$/.test(phone.replace(/\D/g, ''))) {
    showError("‚ùå Please enter a valid 10-digit mobile number");
    return;
  }

  let parts = "";
  let partCount = 0;
  let hasValidPart = false;
  
  document.querySelectorAll(".part-row").forEach((row, index) => {
    let partName = row.querySelector(".part-input").value.trim();
    let qty = row.querySelector(".qty-input").value.trim();
    if (partName && qty) {
      parts += `\n${partCount + 1}. ${partName} - Qty: ${qty}`;
      partCount++;
      hasValidPart = true;
    }
  });

  if (!hasValidPart) {
    showError("‚ùå Please add at least one spare part");
    return;
  }

  let fullAddress = address1;
  if (address2) fullAddress += ", " + address2;
  fullAddress += ", " + city + " - " + zipcode;

  let msg = `üõµ *SANKAR MOTORS - ORDER REQUEST*

üë§ *Customer Details:*
Name: ${name}
Phone: ${phone}
${email ? "Email: " + email : ""}

üèçÔ∏è *Bike Information:*
Model: ${finalBikeModel}
Year: ${bikeYear}
${additionalBikeInfo ? "Details: " + additionalBikeInfo : ""}

üìç *Delivery Address:*
${fullAddress}

üõ†Ô∏è *Spare Parts Ordered:*
${parts}

${notes ? "\nüìù *Special Instructions:*\n" + notes : ""}

‚úì Thank you for your order!`;

  // Store message and URL for sending later
  window.pendingWhatsAppMessage = msg;
  window.pendingWhatsAppUrl = "https://wa.me/" + "919246485044" + "?text=" + encodeURIComponent(msg);
  
  // Show message preview modal
  showMessageModal(msg);
}

function showMessageModal(message) {
  document.getElementById("messagePreview").textContent = message;
  document.getElementById("messageModal").style.display = "block";
}

function closeMessageModal() {
  document.getElementById("messageModal").style.display = "none";
  window.pendingWhatsAppMessage = null;
  window.pendingWhatsAppUrl = null;
}

// Close modal when clicking outside
window.onclick = function(event) {
  const modal = document.getElementById("messageModal");
  if (event.target == modal) {
    closeMessageModal();
  }
}

function sendToWhatsApp() {
  if (window.pendingWhatsAppUrl) {
    window.open(window.pendingWhatsAppUrl, "_blank");
    closeMessageModal();
    // Clear form after successful send
    document.getElementById("orderForm").reset();
  }
}

function copyMessage() {
  const messageText = document.getElementById("messagePreview").textContent;
  navigator.clipboard.writeText(messageText).then(() => {
    alert("‚úÖ Message copied to clipboard! You can now paste it in WhatsApp.");
  }).catch(err => {
    alert("‚ùå Failed to copy message. Please try again.");
  });
}

function showError(message) {
  let errorMsg = document.getElementById("errorMessage");
  if (!errorMsg) {
    const form = document.getElementById("orderForm");
    errorMsg = document.createElement("div");
    errorMsg.id = "errorMessage";
    errorMsg.className = "error-message";
    form.insertBefore(errorMsg, form.firstChild);
  }
  errorMsg.innerHTML = message;
  errorMsg.style.display = "block";
  errorMsg.scrollIntoView({ behavior: "smooth", block: "nearest" });
}

function toggleCustomBike() {
  const bikeModel = document.getElementById("bikeModel").value;
  const customContainer = document.getElementById("customBikeContainer");
  if (bikeModel === "OTHER") {
    customContainer.style.display = "block";
    document.getElementById("customBikeModel").focus();
  } else {
    customContainer.style.display = "none";
    document.getElementById("customBikeModel").value = "";
  }
}

// Initialize remove buttons on page load
updateRemoveButtons();
</script>

</body>
</html>
